<div class="lms-section">
  <div class="lms-section__header">
    <div class="lms-section__breadcrumb">
      <span>LMS</span>
      <span>/</span>
      <span class="active">Courses</span>
    </div>

    <h2>Available Courses</h2>
    <p>Browse a curated set of courses available through the LMS.</p>
  </div>

  <div class="lms-section__body">
    <app-lms-filters
      [filters]="filters"
      [state]="filterState"
      [resultCount]="filteredCourses.length"
      (stateChange)="applyFilters($event)"
      (reset)="resetFilters()"
    ></app-lms-filters>

    <div class="lms-section__content">
      <div
        class="lms-courses-grid"
        *ngIf="!isLoading && !error && filteredCourses.length > 0; else loadingOrEmpty"
      >
        <app-course-card
          *ngFor="let c of filteredCourses; trackBy: trackByCourseId"
          [course]="c"
          [owned]="isCourseOwned(c)"
          (purchased)="onCoursePurchased($event)"
        ></app-course-card>
      </div>

      <!-- Hours -->
      <ng-template #loadingOrEmpty>
        <div class="lms-section__state" *ngIf="isLoading">Loading courses...</div>

        <div
          class="lms-section__state lms-section__state--empty"
          *ngIf="!isLoading && !error && filteredCourses.length === 0"
        >
          No courses match your filters.
        </div>

        <div class="lms-section__state lms-section__state--error" *ngIf="!isLoading && error">
          {{ error }}
        </div>
      </ng-template>
    </div>
  </div>
</div>
