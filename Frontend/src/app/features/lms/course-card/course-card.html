<article class="lms-course-card card" [class.lms-course-card--owned]="owned" (click)="toggleFlip()">
  <div class="card-inner" [class.is-flipped]="isFlipped">
    <div class="card-front">
      <div class="lms-course-card__thumb">
        <ng-container *ngIf="getThumbnailUrl() as thumbnailUrl; else thumbNull">
          <img [src]="thumbnailUrl" [alt]="course.title ?? 'Course thumbnail'" loading="lazy" />
        </ng-container>
        <ng-template #thumbNull>
          <div class="lms-course-card__thumb-placeholder">null</div>
        </ng-template>
      </div>

      <h3 class="lms-course-card__title">
        {{ course.title ?? 'null' }}
      </h3>

      <footer class="lms-course-card__footer">
        <div class="lms-course-card__price">
          <span class="lms-course-card__price-label">Price</span>
          <span class="lms-course-card__price-value">
            <ng-container
              *ngIf="course.price !== null && course.price !== undefined; else priceNull"
            >
              {{ course.price | number : '1.2-2' }} $
            </ng-container>
            <ng-template #priceNull>null</ng-template>
          </span>
        </div>

        <button
          type="button"
          class="lms-primary-btn"
          (click)="onPurchase(); $event.stopPropagation()"
          [disabled]="isProcessing"
        >
          {{ owned ? 'View in My Courses' : isProcessing ? 'Processing...' : 'Buy / Enroll' }}
        </button>
      </footer>
    </div>

    <div class="card-back">
      <p class="lms-course-card__description">{{ getDescription() }}</p>
    </div>
  </div>
</article>
