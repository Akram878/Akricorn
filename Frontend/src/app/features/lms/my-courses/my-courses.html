<div class="lms-courses-page">
  <!-- Header -->
  <div class="lms-courses-page__header">
    <div class="lms-courses-page__breadcrumb">
      <span>LMS</span>
      <span>/</span>
      <span class="active">My courses</span>
    </div>

    <h2>My courses</h2>
    <p>
      Here you can see the courses you have already purchased. Use the filters to focus on specific
      categories or minimum hours.
    </p>
  </div>

  <!-- Topbar filters (فقط الساعات + الفئات) -->
  <div class="lms-courses-page__topbar">
    <div class="lms-courses-page__filters">
      <!-- Min hours -->
      <div class="lms-filter-field">
        <label class="lms-filter-field__label">Min hours</label>
        <input
          type="number"
          class="lms-filter-input"
          placeholder="e.g. 5"
          [(ngModel)]="minHours"
          (ngModelChange)="applyFilters()"
        />
      </div>

      <!-- Category -->
      <div class="lms-filter-field">
        <label class="lms-filter-field__label">Category</label>
        <select class="lms-filter-select" [(ngModel)]="selectedCategory" (change)="applyFilters()">
          <option value="all">All</option>
          <option *ngFor="let cat of categories" [value]="cat">
            {{ cat }}
          </option>
        </select>
      </div>
    </div>

    <!-- زر Reset بسيط -->
    <div class="lms-courses-page__sort">
      <button type="button" class="lms-primary-btn" (click)="resetFilters()">Reset filters</button>
    </div>
  </div>

  <!-- Grid of my courses -->
  <div
    class="lms-courses-grid"
    *ngIf="!isLoading && !error && filteredMyCourses.length > 0; else loadingOrEmpty"
  >
    <app-course-card
      *ngFor="let c of filteredMyCourses; trackBy: trackByCourseId"
      [course]="c"
      [owned]="true"
      [thumbnailUrl]="courseThumbnails[c.id]"
    ></app-course-card>
  </div>

  <ng-template #loadingOrEmpty>
    <div class="lms-courses-page__state" *ngIf="isLoading">Loading your courses...</div>

    <div
      class="lms-courses-page__state lms-courses-page__state--empty"
      *ngIf="!isLoading && !error && filteredMyCourses.length === 0"
    >
      You don't have any courses yet or no course matches the selected filters.
    </div>

    <div class="lms-courses-page__state lms-courses-page__state--error" *ngIf="!isLoading && error">
      {{ error }}
    </div>
  </ng-template>
</div>
